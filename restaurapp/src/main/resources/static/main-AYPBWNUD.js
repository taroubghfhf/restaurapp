import{a as C,b,c as p,e as R}from"./chunk-HAWBH55J.js";import{a as I}from"./chunk-BQTDLULF.js";import{Ca as h,Eb as v,Fb as A,Gb as s,R as a,Ra as f,ba as u,ca as d,kb as g,m as c,w as l}from"./chunk-5IEPMVD6.js";var M=(t,r)=>{let n=localStorage.getItem("authToken");if(n){let e=t.clone({setHeaders:{Authorization:`Bearer ${n}`}});return r(e)}return r(t)};var x=(t,r)=>{let n=a(p);return r(t).pipe(l(e=>{let o="Ha ocurrido un error";if(e.error instanceof ErrorEvent)o=`Error: ${e.error.message}`;else switch(e.status){case 401:o="Sesi\xF3n expirada. Por favor inicie sesi\xF3n nuevamente.",localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("userId"),localStorage.removeItem("userName"),n.navigate(["/login"]);break;case 403:o="No tiene permisos para realizar esta acci\xF3n.";break;case 404:o="Recurso no encontrado.";break;case 409:o=e.error?.message||"El registro ya existe.";break;case 500:o="Error interno del servidor. Por favor intente m\xE1s tarde.";break;default:o=e.error?.message||`Error ${e.status}: ${e.statusText}`}return console.error("Error HTTP:",{status:e.status,message:o,error:e.error}),c(()=>({status:e.status,message:o,originalError:e}))}))};var i=()=>{let t=a(s),r=a(p);return t.isAuthenticated()?!0:(r.navigate(["/login"]),!1)};var S=t=>{let r=a(s),n=a(p);if(!r.isAuthenticated())return n.navigate(["/login"]),!1;let e=t.data.roles;if(!e||e.length===0)return!0;let o=r.getUserRole();return o&&e.includes(o)?!0:(n.navigate(["/unauthorized"]),!1)};var k=[{path:"login",loadComponent:()=>import("./chunk-XI77FROD.js").then(t=>t.LoginComponent)},{path:"dashboard",canActivate:[i],loadComponent:()=>import("./chunk-OZS4KQTJ.js").then(t=>t.DashboardComponent)},{path:"admin",canActivate:[i,S],data:{roles:["Admin"]},children:[{path:"dashboard",loadComponent:()=>import("./chunk-OZS4KQTJ.js").then(t=>t.DashboardComponent)},{path:"roles",loadComponent:()=>import("./chunk-IICW5BZB.js").then(t=>t.RoleManagementComponent)},{path:"status",loadComponent:()=>import("./chunk-U3XQIUFF.js").then(t=>t.StatusManagementComponent)},{path:"users",loadComponent:()=>import("./chunk-CIIWDIQH.js").then(t=>t.UserManagementComponent)},{path:"categories",loadComponent:()=>import("./chunk-PSOUZDAD.js").then(t=>t.CategoryManagementComponent)},{path:"products",loadComponent:()=>import("./chunk-I5FYRSCG.js").then(t=>t.ProductManagementComponent)},{path:"tables",loadComponent:()=>import("./chunk-ES2NLVAS.js").then(t=>t.TableManagementComponent)},{path:"order-items",loadComponent:()=>import("./chunk-EZGNJGIG.js").then(t=>t.OrderItemManagementComponent)},{path:"order-tickets",loadComponent:()=>import("./chunk-N3LQ6W77.js").then(t=>t.OrderTicketManagementComponent)},{path:"websocket-monitor",loadComponent:()=>import("./chunk-GQTBNJYX.js").then(t=>t.WebSocketMonitorComponent)}]},{path:"waiter/orders",canActivate:[i],loadComponent:()=>import("./chunk-OZS4KQTJ.js").then(t=>t.DashboardComponent)},{path:"chef/orders",canActivate:[i],loadComponent:()=>import("./chunk-OZS4KQTJ.js").then(t=>t.DashboardComponent)},{path:"",redirectTo:"/login",pathMatch:"full"}];var E={providers:[u(),g({eventCoalescing:!0}),R(k),v(A([M,x]))]};var m=class t{title=d("RestaurApp");static \u0275fac=function(n){return new(n||t)};static \u0275cmp=h({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(n,e){n&1&&f(0,"router-outlet")(1,"app-notification")},dependencies:[b,I],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"]})};C(m,E).catch(t=>console.error(t));
